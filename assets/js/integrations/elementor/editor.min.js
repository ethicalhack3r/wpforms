"use strict";var WPFormsElementor=window.WPFormsElementor||function(i,s){var d={},c={init:function(){c.events()},events:function(){s(i).on("elementor/frontend/init",function(e,o,t){elementor.channels.editor.on("elementorWPFormsAddFormBtnClick",c.addFormBtnClick),elementorFrontend.hooks.addAction("frontend/element_ready/widget",c.widgetPreviewEvents),elementor.hooks.addAction("panel/open_editor/widget/wpforms",c.widgetPanelOpen)})},widgetPreviewEvents:function(e){e.on("click",".wpforms-btn",c.addFormBtnClick).on("click",".wpforms-admin-no-forms-container a",c.clickLinkInPreview).on("change",".wpforms-elementor-form-selector select",c.selectFormInPreview).on("click mousedown focus keydown submit",".wpforms-container *",c.disableEvents)},widgetPanelOpen:function(e,o){d.widgetId=o.attributes.id,d.formId=o.attributes.settings.attributes.form_id,c.widgetPanelInit(e),c.widgetPanelSectionClickObserver(e)},widgetPanelInit:function(e){var o=e.$el.find(".elementor-control.elementor-control-form_id"),t=o.find("select"),n=e.$el.find(".elementor-control.elementor-control-add_form_notice"),r=e.$el.find(".elementor-control.elementor-control-test_form_notice");d.formSelectOptions&&t.html(d.formSelectOptions),d.formId&&""!==d.formId&&t.val(d.formId),0<t.find("option").length?n.hide():(o.hide(),r.hide()),0<parseInt(t.val(),10)&&r.show(),e.$el.find(".elementor-control.elementor-control-form_id").on("change","select",function(){d.formId=s(this).val()}),e.$el.find(".elementor-control.elementor-control-edit_form").on("click","a",c.editFormLinkClick)},widgetPanelSectionClickObserver:function(l){if(d.observerWidgetId!==d.widgetId){void 0!==d.observer&&s.isFunction(d.observer.disconnect)&&d.observer.disconnect();var e={targetNode:l.$el.find("#elementor-panel-page-editor")[0],config:{childList:!0,subtree:!0},callback:function(e,o){var t,n;for(var r in e)if(!("childList"!==(t=e[r]).type||t.addedNodes.length<1))for(var i in t.addedNodes)(n=t.addedNodes[i])&&n.classList&&n.classList.contains("elementor-control-section_form")&&c.widgetPanelInit(l)}};e.observer=new MutationObserver(e.callback),e.observer.observe(e.targetNode,e.config),d.observerWidgetId=d.widgetId,d.observer=e.observer}},editFormLinkClick:function(e){c.findFormSelector(e),c.openBuilderPopup(d.$select.val())},addFormBtnClick:function(e){c.findFormSelector(e),c.openBuilderPopup(0)},findFormSelector:function(e){d.$select=e&&e.$el?e.$el.closest("#elementor-controls").find('select[data-setting="form_id"]'):i.parent.jQuery('#elementor-controls select[data-setting="form_id"]')},selectFormInPreview:function(){d.formId=s(this).val(),c.findFormSelector(),d.$select.val(d.formId).trigger("change")},clickLinkInPreview:function(e){e.target&&e.target.href&&i.open(e.target.href,"_blank","noopener,noreferrer")},disableEvents:function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1},openBuilderPopup:function(e){if(e=parseInt(e||"0",10),!d.$popup){var o=i.parent.jQuery("#elementor-editor-wrapper"),t=wp.template("wpforms-builder-elementor-popup");o.after(t()),d.$popup=o.siblings("#wpforms-builder-elementor-popup")}var n=0<e?wpformsElementorVars.edit_form_url+e:wpformsElementorVars.add_form_url,r=d.$popup.find("iframe");c.builderCloseButtonEvent(),r.attr("src",n),d.$popup.fadeIn()},builderCloseButtonEvent:function(){d.$popup.off("wpformsBuilderInPopupClose").on("wpformsBuilderInPopupClose",function(e,o,t){"saved"===o&&t&&c.refreshFormsList(null,t)})},refreshFormsList:function(e,o){e&&e.preventDefault(),c.findFormSelector();var t={action:"wpforms_admin_get_form_selector_options",nonce:wpformsElementorVars.nonce};d.$select.prop("disabled",!0),s.post(wpformsElementorVars.ajax_url,t).done(function(e){e.success?(d.formSelectOptions=e.data,d.$select.html(e.data),o&&(d.formId=o),d.formId&&""!==d.formId&&d.$select.val(d.formId).trigger("change")):c.debug(e)}).fail(function(e,o){c.debug({xhr:e,textStatus:o})}).always(function(){if(d.$select&&!(d.$select.length<1)){d.$select.prop("disabled",!1);var e=d.$select.find("option"),o=d.$select.closest(".elementor-control");0<e.length&&(o.show(),o.siblings(".elementor-control-add_form_notice").hide()),0<parseInt(d.$select.val(),10)&&o.siblings(".elementor-control-test_form_notice").show()}})},debug:function(e){c.isDebug()&&console.log("WPForms Debug:",e)},isDebug:function(){return i.top.location.hash&&"#wpformsdebug"===i.top.location.hash||wpformsElementorVars.debug}};return c}((document,window),jQuery);WPFormsElementor.init();